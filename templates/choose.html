<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>å€™è£œæ—¥æ™‚ã®é¸æŠ</title>
  <style>
    body {
      font-family: sans-serif;
      margin: 2em;
    }
    .conflict {
      color: red;
      font-weight: bold;
    }
    .section {
      margin-bottom: 2em;
    }
  </style>
</head>
<body>
  <h1>å€™è£œæ—¥æ™‚ã®é¸æŠ</h1>

  <div class="section">
    <h2>ğŸ“¨ ãƒ¡ãƒ¼ãƒ«å†…å®¹</h2>
    <p><strong>ä»¶å:</strong> {{ subject }}</p>
    <p><strong>å·®å‡ºäºº:</strong> {{ from }}</p>
    <p><strong>CC:</strong> {{ cc.split(',') | join(', ') }}</p>
    <p><strong>æœ¬æ–‡:</strong><br>{{ body }}</p>
  </div>

  <div class="section">
    <h2>å€™è£œä¸€è¦§ï¼ˆâš ï¸ ï¼äºˆå®šã‚ã‚Šï¼‰</h2>
    <form method="post" target="_blank">
      <!-- ä»¶åãƒ»å·®å‡ºäººãƒ»CC ã‚’ hidden ã§æ¸¡ã™ -->
      <input type="hidden" name="subject" value="{{ subject }}">
      <input type="hidden" name="from" value="{{ from_ }}">
      <input type="hidden" name="cc" value="{{ cc }}">
      {% for dt in candidates %}
        {% set idx = loop.index0 %}
        {% set conflict = conflicts[idx] %}

        <div>
          <input type="radio" name="selected" value="{{ dt }}" id="dt{{ loop.index }}" required>
          <label for="dt{{ loop.index }}">
            {% if conflict == 'true' %}
              âš ï¸ <span class="conflict">{{ dt }}ï¼ˆäºˆå®šã‚ã‚Šï¼‰</span>
            {% else %}
              {{ dt }}ï¼ˆç©ºãï¼‰
            {% endif %}
          </label>
        </div>
      {% endfor %}
      <input type="hidden" name="body" value="{{ body }}">
      <br>
      <button type="submit">ã“ã®æ—¥æ™‚ã§äºˆå®šã‚’ä½œæˆã—ã¦ã¿ã‚‹</button>
    </form>
  </div>
</body>
</html>
