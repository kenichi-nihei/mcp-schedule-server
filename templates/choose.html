<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>å€™è£œæ—¥æ™‚ã®é¸æŠ</title>
  <style>
    body {
      font-family: sans-serif;
      margin: 2em;
    }
    .conflict {
      color: red;
      font-weight: bold;
    }
    .calendar-link {
      margin-left: 1em;
      font-size: 0.9em;
    }
    .section {
      margin-bottom: 2em;
    }
  </style>
</head>
<body>
  <h1>å€™è£œæ—¥æ™‚ã®é¸æŠ</h1>

  <div class="section">
    <h2>ğŸ“¨ ãƒ¡ãƒ¼ãƒ«å†…å®¹</h2>
    <p><strong>ä»¶å:</strong> {{ subject }}</p>
    <p><strong>å·®å‡ºäºº:</strong> {{ from }}</p>
    <p><strong>CC:</strong> {{ cc.split(',') | join(', ') }}</p>
    <p><strong>æœ¬æ–‡:</strong><br>{{ body }}</p>
  </div>

  <div class="section">
    <h2>å€™è£œä¸€è¦§ï¼ˆâš ï¸ ï¼äºˆå®šã‚ã‚Šï¼‰</h2>
    <form method="post">
      {% for dt in candidates %}
        {% set idx = loop.index0 %}
        {% set conflict = conflicts[idx] %}
        {% set date_only = dt.split('T')[0] %}

        <!-- ç¢ºèªç”¨å‡ºåŠ› -->
        <p>{{ dt }} â†’ {{ dt.split('T')[0] }}</p>

        <div>
          <input type="radio" name="selected" value="{{ dt }}" id="dt{{ loop.index }}" required>
          <label for="dt{{ loop.index }}">
            {% if conflict == 'true' %}
              âš ï¸ <span class="conflict">{{ dt }}ï¼ˆäºˆå®šã‚ã‚Šï¼‰</span>
            {% else %}
              â—‹ {{ dt }}ï¼ˆç©ºãï¼‰
            {% endif %}
          </label
          <a href="/static/jump.html?date={{ dt.split('T')[0] }}" target="_blank">ğŸ“… ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã§ç¢ºèª</a>
          <!-- å¾“æ¥ã®Outlookç›´ãƒªãƒ³ã‚¯ï¼‰ -->
          <!-- <a href="https://mcp-schedule-server.onrender.com/jump.html?date={{ dt.split('T')[0] }}" target="_blank">ğŸ“… ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã§ç¢ºèª</a> -->

        </div>
      {% endfor %}
      <input type="hidden" name="body" value="{{ body }}">
      <br>
      <button type="submit">ã“ã®æ—¥æ™‚ã§äºˆå®šã‚’ä½œæˆ</button>
    </form>
  </div>
</body>
</html>
